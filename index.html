<html>
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- generated by chatgpt 3.5 -->
  
  <style>
          body {
            font-family: Arial, sans-serif;
            background-color: #f3f3f3;
            margin: 0;
            padding: 0;
            font-size: 21px; /* Increased font size */
        }

        .chat-container {
            max-width: 1000px;
            margin: 20px auto;
            background-color: #ffffff;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.1);
        }

        .chat-header {
            background-color: #ffffff; /*#007bff;*/
            color: #000000; /*#ffffff;*/
            padding: 20px; /* Increased padding */
            text-align: center;
            font-weight: bold;
            font-size: 1.5em; /* Increased font size */
        }

        .chat-messages {
            padding: 20px; /* Increased padding */
            overflow-y: auto;
            max-height: 800px; /* Increased height */
        }

        .message {
            margin-bottom: 10px;
        }

        .user-message {
            background-color: #eeeeee; /*#d4edda;*/
            border-radius: 10px;
            border: solid 1px #000000;
            padding: 12px 16px; /* Increased padding */
            display: inline-block;
            max-width: 95%;
        }

        .ai-message {
            background-color: #cccccc; /*#cce5ff;*/
            border-radius: 10px;
            border: solid 1px #000000;
            padding: 12px 16px; /* Increased padding */
            display: inline-block;
            max-width: 95%;
            align-self: flex-end;
        }

        .message-text {
            word-wrap: break-word;
        }

        .chat-input {
            padding: 20px; /* Increased padding */
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .input-field {
            flex: 1;
            padding: 12px;
            border-radius: 5px;
            border: 1px solid #000000; /*#ced4da;*/
            font-size:21px;
        }

        .send-button {
            padding: 12px 24px; /* Increased padding */
            background-color: #eeeeee; /*#007bff;*/
            color: #000000;
            border: 1px solid #000000;
            border-radius: 5px;
            cursor: pointer;
            font-size:21px;
        }
  </style>
  </head>

  <body>
  <div class="chat-container">
  <div class="chat-header">Chat Interface</div>
  <div class="chat-messages" id="chat-messages">
  <!-- Messages will be inserted here -->
  </div>
  <div class="chat-input">
  <input type="text" id="message-input" class="input-field" placeholder="Type a message...">
  <button onclick="sendMessage()" class="send-button">Send</button>
  </div>
  </div>

  <script>
        var thread_id = "";
        
        function sendMessage() {
            var messageInput = document.getElementById("message-input");
            var messageText = messageInput.value.trim();
            
            if (messageText !== "") {
                addMessage("user", messageText);

                fetch('http://localhost:3000/runAssistant', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        sThread: thread_id, 
                        sMessage: messageText,
                        sAssistant: "asst_jkVOT7Nu2bj1BZoQtT9jI2fy"
                    })
                })
                .then(response => response.json())
                .then(data => {
                    // Simulate AI response
                    let aiText = data.threadMessages.body.data[0].content[0].text.value;
                    thread_id = data.sThread;
                    console.log(data); //debug
                    console.log(thread_id); //debug
                    addMessage("ai", aiText);
                })
                .catch(error => {
                    console.error('Error:', error);
                });

                messageInput.value = "";
            }
        }

        function addMessage(sender, message) {
          console.log(message);
            var chatMessages = document.getElementById("chat-messages");
            var messageContainer = document.createElement("div");
            var messageClass = sender === "user" ? "user-message" : "ai-message";

            messageContainer.classList.add("message");
            messageContainer.innerHTML = `<div class="${messageClass}"><span class="message-text">${message}</span></div>`;
            chatMessages.appendChild(messageContainer);

            // Scroll to bottom
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }
    </script>
  </body>
  </html>
